<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TetraHub Mobile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Outfit', 'sans-serif'] },
                    colors: { dark: '#0f172a', card: 'rgba(30, 41, 59, 0.7)' },
                    animation: { 'blob': 'blob 7s infinite' },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #000000;
            background-image: radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
            background-attachment: fixed;
            color: white;
            -webkit-tap-highlight-color: transparent;
        }
        .glass-panel { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .glass-card { background: rgba(30, 41, 59, 0.6); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.05); transition: transform 0.2s, background 0.2s; }
        .glass-card:active { transform: scale(0.96); background: rgba(30, 41, 59, 0.8); }
        ::-webkit-scrollbar { display: none; }
        * { -ms-overflow-style: none; scrollbar-width: none; }
        #transition-overlay { clip-path: circle(0% at 50% 50%); transition: clip-path 0.6s cubic-bezier(0.7, 0, 0.3, 1); }
        #transition-overlay.active { clip-path: circle(150% at 50% 50%); }
    </style>
</head>
<body class="antialiased h-screen overflow-hidden flex flex-col">

    <div class="fixed top-20 left-10 w-72 h-72 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
    <div class="fixed top-20 right-10 w-72 h-72 bg-cyan-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"></div>
    <div class="fixed -bottom-8 left-20 w-72 h-72 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"></div>

    <div id="app" class="relative z-10 flex flex-col max-w-md mx-auto w-full h-full">
        
        <header class="p-6 flex justify-between items-center flex-shrink-0">
            <div>
                <h2 class="text-sm text-gray-400 font-medium">Welcome,</h2>
                <h1 class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400">Tetra User</h1>
            </div>
            <div class="relative group cursor-pointer" onclick="handleProfileClick()">
                <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-indigo-500 to-purple-500 p-[2px]">
                    <img src="https://ui-avatars.com/api/?name=Tetra+Hub&background=0D0D0D&color=fff" alt="Profile" class="rounded-full w-full h-full object-cover">
                </div>
                <div class="absolute top-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-black"></div>
            </div>
        </header>

        <div class="px-6 mb-6 flex-shrink-0">
            <div class="glass-panel rounded-2xl p-5 shadow-2xl relative overflow-hidden">
                <div class="absolute top-0 right-0 -mr-4 -mt-4 w-24 h-24 bg-white opacity-5 rounded-full blur-xl"></div>
                <p class="text-gray-400 text-xs font-semibold tracking-wider uppercase">Total Assets</p>
                <div class="flex items-baseline mt-1 space-x-1">
                    <span class="text-3xl font-bold">$12,450.00</span>
                    <span class="text-green-400 text-sm font-medium flex items-center"><i class="fas fa-arrow-up text-xs mr-1"></i> 4.2%</span>
                </div>
                <div class="mt-4 flex gap-3">
                    <button class="flex-1 bg-white/10 hover:bg-white/20 py-2 rounded-lg text-xs font-semibold backdrop-blur-sm transition">Deposit</button>
                    <button class="flex-1 bg-white/10 hover:bg-white/20 py-2 rounded-lg text-xs font-semibold backdrop-blur-sm transition">Withdraw</button>
                </div>
            </div>
        </div>

        <main class="px-6 flex-1 overflow-y-auto pb-40 scroll-smooth snap-y snap-mandatory scroll-pt-6 min-h-0">
            <h3 class="text-lg font-bold mb-4 text-white/90 sticky top-0 bg-transparent backdrop-blur-sm py-2 z-10">Apps</h3>
            <div id="grid-container" class="grid grid-cols-2 gap-4"></div>
        </main>

        <nav class="fixed bottom-0 left-0 right-0 bg-black/80 backdrop-blur-xl border-t border-white/10 z-50 pb-safe">
            <div class="max-w-md mx-auto flex justify-around items-center h-16 px-2">
                <a href="#" class="flex flex-col items-center justify-center w-16 text-indigo-400">
                    <i class="fas fa-home text-xl mb-1"></i>
                    <span class="text-[10px]">Hub</span>
                </a>
                <a href="#" class="flex flex-col items-center justify-center w-16 text-gray-500 hover:text-white transition">
                    <i class="fas fa-chart-pie text-xl mb-1"></i>
                    <span class="text-[10px]">Portfolio</span>
                </a>
                <div class="relative -top-5">
                    <button onclick="openSettings()" class="w-14 h-14 bg-gradient-to-tr from-pink-500 to-indigo-600 rounded-full shadow-lg shadow-indigo-500/40 flex items-center justify-center text-white transform transition active:scale-95">
                        <i class="fas fa-cog text-xl"></i>
                    </button>
                </div>
                <a href="#" class="flex flex-col items-center justify-center w-16 text-gray-500 hover:text-white transition">
                    <i class="fas fa-bell text-xl mb-1"></i>
                    <span class="text-[10px]">Announcements</span>
                </a>
                <a href="#" class="flex flex-col items-center justify-center w-16 text-gray-500 hover:text-white transition">
                    <i class="fas fa-wallet text-xl mb-1"></i>
                    <span class="text-[10px]">Wallet</span>
                </a>
            </div>
        </nav>
    </div>

    <div id="settings-modal" class="fixed inset-0 z-[60] bg-black/95 transform translate-y-full transition-transform duration-300 ease-in-out flex flex-col">
        <div class="px-6 pt-12 pb-4 flex justify-between items-center bg-black/50 backdrop-blur-lg border-b border-white/10">
            <h2 class="text-2xl font-bold">Hub Management</h2>
            <button onclick="closeSettings()" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white hover:bg-white/20 transition">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="flex-1 overflow-y-auto p-6 space-y-8">
            <div class="glass-panel p-4 rounded-xl border border-white/5 mb-6">
                <h3 class="text-indigo-400 text-sm font-bold mb-3 uppercase tracking-wider">General Settings</h3>
                <label class="block text-[10px] text-gray-500 uppercase">Top Left Profile URL</label>
                <input type="text" id="global-profile-url" class="w-full bg-black/50 border border-white/10 rounded-lg p-3 text-blue-300 text-xs focus:border-indigo-500 outline-none mt-1" placeholder="https://...">
            </div>

            <p class="text-gray-400 text-xs uppercase tracking-wider font-bold">Application Cards</p>
            <form id="settings-form" class="space-y-6"></form>
            <div class="h-20"></div>
        </div>
        <div class="p-6 border-t border-white/10 bg-black/90 backdrop-blur-md pb-10">
            <button onclick="saveSettings()" class="w-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-bold py-4 rounded-xl shadow-lg shadow-indigo-500/30 active:scale-[0.98] transition">Save Changes</button>
            <button onclick="resetDefaults()" class="w-full mt-3 py-3 text-red-400 text-sm font-medium opacity-80 hover:opacity-100">Reset to Defaults</button>
        </div>
    </div>

    <div id="transition-overlay" class="fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center text-center">
        <div class="absolute inset-0 bg-gradient-to-br opacity-40 transition-colors duration-700" id="transition-bg"></div>
        <div class="relative z-10 p-8">
            <div id="transition-emoji" class="text-8xl mb-6 transform scale-0 opacity-0 transition-all duration-500"></div>
            <h2 id="transition-title" class="text-4xl font-bold text-white mb-2 transform translate-y-10 opacity-0 transition-all duration-500 delay-100"></h2>
            <div class="w-16 h-1 bg-white/50 mx-auto rounded-full mt-4 transform scale-x-0 transition-all duration-500 delay-200" id="transition-line"></div>
            <p class="text-white/60 mt-4 text-sm animate-pulse">Loading...</p>
        </div>
        <button onclick="cancelTransition()" id="cancel-btn" class="absolute bottom-10 z-20 text-white/70 hover:text-white text-sm font-medium opacity-0 transition-opacity duration-300 transform active:scale-95">
            <i class="fas fa-arrow-left mr-2"></i>Back to Hub
        </button>
    </div>

    <script>
        const defaultApps = [
            { id: 'airdrop', title: 'Airdrop', subtitle: 'Earn Token', emoji: 'ðŸª‚', url: '#airdrop', colorStart: 'from-blue-500', colorEnd: 'to-cyan-400' },
            { id: 'game', title: 'TetraGame', subtitle: 'Play & Earn', emoji: 'ðŸ•¹ï¸', url: '#game', colorStart: 'from-purple-500', colorEnd: 'to-pink-500' },
            { id: 'social', title: 'TetraSocial', subtitle: 'Community', emoji: 'ðŸŒ', url: '#social', colorStart: 'from-indigo-500', colorEnd: 'to-blue-600' },
            { id: 'staking', title: 'Staking', subtitle: '120% APY', emoji: 'ðŸ’Ž', url: '#staking', colorStart: 'from-emerald-500', colorEnd: 'to-teal-400' },
            { id: 'swap', title: 'Swap', subtitle: 'Quick Swap', emoji: 'âš¡', url: '#swap', colorStart: 'from-orange-500', colorEnd: 'to-yellow-400' },
            { id: 'profile', title: 'Profile', subtitle: 'NFT & ID', emoji: 'ðŸ‘¤', url: '#profile', colorStart: 'from-gray-600', colorEnd: 'to-gray-800' }
        ];

        let apps = JSON.parse(localStorage.getItem('tetraHubApps')) || JSON.parse(JSON.stringify(defaultApps));
        let globalProfileUrl = localStorage.getItem('tetraHubProfileUrl') || '#profile';
        let navigationTimeout; // Global to manage the navigation timeout

        function renderGrid() {
            const container = document.getElementById('grid-container');
            container.innerHTML = '';
            apps.forEach((app) => {
                const card = document.createElement('div');
                card.onclick = (e) => triggerTransition(e, app);
                card.className = `glass-card p-4 rounded-2xl flex flex-col justify-between h-36 relative overflow-hidden group snap-start cursor-pointer hover:border-white/20`;
                card.innerHTML = `
                    <div class="absolute top-0 right-0 w-20 h-20 bg-gradient-to-br ${app.colorStart} ${app.colorEnd} opacity-20 blur-xl rounded-full -mr-4 -mt-4 group-hover:opacity-30 transition duration-500"></div>
                    <div class="z-10 w-10 h-10 rounded-full bg-gradient-to-br ${app.colorStart} ${app.colorEnd} flex items-center justify-center text-xl shadow-lg mb-2 transform group-hover:scale-110 transition duration-300">${app.emoji}</div>
                    <div class="z-10"><h4 class="font-bold text-lg leading-tight text-white group-hover:text-indigo-200 transition">${app.title}</h4><p class="text-xs text-gray-400 mt-1">${app.subtitle}</p></div>
                    <div class="absolute bottom-3 right-3 text-white/10 group-hover:text-white/30 transition transform group-hover:translate-x-1"><i class="fas fa-chevron-right"></i></div>
                `;
                container.appendChild(card);
            });
        }

        function handleProfileClick() {
            window.location.href = globalProfileUrl;
        }

        function triggerTransition(event, app) {
            const overlay = document.getElementById('transition-overlay');
            const bg = document.getElementById('transition-bg');
            const emoji = document.getElementById('transition-emoji');
            const title = document.getElementById('transition-title');
            const line = document.getElementById('transition-line');

            emoji.innerText = app.emoji;
            title.innerText = app.title;
            bg.className = `absolute inset-0 bg-gradient-to-br opacity-90 ${app.colorStart} ${app.colorEnd}`;
            overlay.classList.add('active');
            
            setTimeout(() => { emoji.classList.remove('scale-0', 'opacity-0'); emoji.classList.add('scale-100', 'opacity-100'); }, 100);
            setTimeout(() => { title.classList.remove('translate-y-10', 'opacity-0'); title.classList.add('translate-y-0', 'opacity-100'); }, 200);
            setTimeout(() => { line.classList.remove('scale-x-0'); line.classList.add('scale-x-100'); }, 300);
            
            // Show cancel button after a short delay
            setTimeout(() => { document.getElementById('cancel-btn').style.opacity = '1'; }, 500);

            navigationTimeout = setTimeout(() => { 
                window.location.href = app.url;
            }, 1500);
        }

        function cancelTransition() {
            clearTimeout(navigationTimeout); 
            closeTransition();
            showToast('Navigation Cancelled.');
        }

        function closeTransition() {
            const overlay = document.getElementById('transition-overlay');
            
            // Hide cancel button immediately
            document.getElementById('cancel-btn').style.opacity = '0';

            overlay.classList.remove('active');
            setTimeout(() => {
                const emoji = document.getElementById('transition-emoji');
                const title = document.getElementById('transition-title');
                const line = document.getElementById('transition-line');
                emoji.classList.add('scale-0', 'opacity-0'); emoji.classList.remove('scale-100', 'opacity-100');
                title.classList.add('translate-y-10', 'opacity-0'); title.classList.remove('translate-y-0', 'opacity-100');
                line.classList.add('scale-x-0'); line.classList.remove('scale-x-100');
            }, 600);
        }

        function renderSettingsForm() {
            document.getElementById('global-profile-url').value = globalProfileUrl;
            const form = document.getElementById('settings-form');
            form.innerHTML = '';
            const colorOptions = [
                { name: 'Blue/Cyan', start: 'from-blue-500', end: 'to-cyan-400' },
                { name: 'Purple/Pink', start: 'from-purple-500', end: 'to-pink-500' },
                { name: 'Green/Teal', start: 'from-emerald-500', end: 'to-teal-400' },
                { name: 'Orange/Yellow', start: 'from-orange-500', end: 'to-yellow-400' },
                { name: 'Indigo/Blue', start: 'from-indigo-500', end: 'to-blue-600' },
                { name: 'Red/Rose', start: 'from-rose-500', end: 'to-red-600' },
                { name: 'Grey/Black', start: 'from-gray-600', end: 'to-gray-800' },
            ];

            apps.forEach((app, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'glass-panel p-4 rounded-xl border border-white/5';
                let colorSelectHTML = `<select id="color-${index}" class="w-full bg-black/50 border border-white/10 rounded-lg p-2 text-xs text-white outline-none focus:border-indigo-500 mt-1">`;
                colorOptions.forEach(opt => {
                    const selected = (opt.start === app.colorStart) ? 'selected' : '';
                    colorSelectHTML += `<option value="${opt.start}|${opt.end}" ${selected}>${opt.name}</option>`;
                });
                colorSelectHTML += `</select>`;

                itemDiv.innerHTML = `
                    <div class="flex justify-between items-center mb-3">
                        <span class="text-sm font-bold text-indigo-300">#${index + 1} ${app.id.toUpperCase()}</span>
                        <div class="w-6 h-6 rounded-full bg-gradient-to-br ${app.colorStart} ${app.colorEnd}"></div>
                    </div>
                    <div class="grid grid-cols-4 gap-3 mb-3">
                        <div class="col-span-1"><label class="block text-[10px] text-gray-500 uppercase">Emoji</label><input type="text" id="emoji-${index}" value="${app.emoji}" class="w-full bg-black/50 border border-white/10 rounded-lg p-2 text-center text-white focus:border-indigo-500 outline-none"></div>
                        <div class="col-span-3"><label class="block text-[10px] text-gray-500 uppercase">Title</label><input type="text" id="title-${index}" value="${app.title}" class="w-full bg-black/50 border border-white/10 rounded-lg p-2 text-white focus:border-indigo-500 outline-none"></div>
                    </div>
                    <div class="mb-3"><label class="block text-[10px] text-gray-500 uppercase">Subtitle</label><input type="text" id="subtitle-${index}" value="${app.subtitle}" class="w-full bg-black/50 border border-white/10 rounded-lg p-2 text-white focus:border-indigo-500 outline-none"></div>
                    <div class="mb-3"><label class="block text-[10px] text-gray-500 uppercase">URL (Link)</label><input type="text" id="url-${index}" value="${app.url}" class="w-full bg-black/50 border border-white/10 rounded-lg p-2 text-blue-300 text-xs focus:border-indigo-500 outline-none"></div>
                    <div><label class="block text-[10px] text-gray-500 uppercase">Theme Color</label>${colorSelectHTML}</div>
                `;
                form.appendChild(itemDiv);
            });
        }

        function openSettings() { renderSettingsForm(); document.getElementById('settings-modal').classList.remove('translate-y-full'); }
        function closeSettings() { document.getElementById('settings-modal').classList.add('translate-y-full'); }
        
        function saveSettings() {
            globalProfileUrl = document.getElementById('global-profile-url').value;
            localStorage.setItem('tetraHubProfileUrl', globalProfileUrl);

            const newApps = [];
            apps.forEach((oldApp, index) => {
                const title = document.getElementById(`title-${index}`).value;
                const subtitle = document.getElementById(`subtitle-${index}`).value;
                const emoji = document.getElementById(`emoji-${index}`).value;
                const url = document.getElementById(`url-${index}`).value;
                const colorVal = document.getElementById(`color-${index}`).value.split('|');
                newApps.push({ ...oldApp, title, subtitle, emoji, url, colorStart: colorVal[0], colorEnd: colorVal[1] });
            });
            apps = newApps;
            localStorage.setItem('tetraHubApps', JSON.stringify(apps));
            renderGrid();
            closeSettings();
            showToast('Settings Saved.');
        }

        function resetDefaults() {
            if(confirm('Are you sure you want to reset all settings to default?')) {
                apps = JSON.parse(JSON.stringify(defaultApps));
                localStorage.setItem('tetraHubApps', JSON.stringify(apps));
                localStorage.removeItem('tetraHubProfileUrl');
                globalProfileUrl = '#profile';
                renderGrid();
                closeSettings();
                showToast('Defaults Loaded.');
            }
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-full shadow-xl z-[60] text-sm font-bold flex items-center animate-bounce';
            toast.innerHTML = `<i class="fas fa-check-circle mr-2"></i> ${message}`;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        window.onload = function() { renderGrid(); };
    </script>
</body>
</html>
